// ------------------------------
// Mixins
// ------------------------------

@mixin avatar-variant($background, $color: color-contrast($background)) {
  --#{$prefix}avatar-color: #{$color};
  --#{$prefix}avatar-bg: #{$background};
}

@mixin avatar-size($width, $height, $font-size) {
  --#{$prefix}avatar-width: #{$width};
  --#{$prefix}avatar-height: #{$height};
  --#{$prefix}avatar-font-size: #{$font-size};

  --#{$prefix}avatar-status-width: #{$width * 0.3};
  --#{$prefix}avatar-status-height: #{$height * 0.3};
}

// ------------------------------
// Base Avatar
// ------------------------------

.avatar {
  --#{$prefix}avatar-color: var(--#{$prefix}body-color);
  --#{$prefix}avatar-bg: transparent;
  --#{$prefix}avatar-width: 3rem;
  --#{$prefix}avatar-height: 3rem;
  --#{$prefix}avatar-font-size: 1.5rem;

  --#{$prefix}avatar-status-width: 0.7rem;
  --#{$prefix}avatar-status-height: 0.7rem;

  display: inline-flex;
  justify-content: center;
  align-items: center;
  position: relative;

  width: var(--#{$prefix}avatar-width);
  height: var(--#{$prefix}avatar-height);
  font-size: var(--#{$prefix}avatar-font-size);

  color: var(--#{$prefix}avatar-color);
  background: var(--#{$prefix}avatar-bg);

  text-align: center;
  vertical-align: middle;
  border-radius: 50%; // c√≠rculo por defecto

  font-weight: 500;

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: inherit;
    display: block;
    background: none;
  }

  i,
  svg {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    width: 1em;
    height: 1em;
    font-size: var(--#{$prefix}avatar-font-size); // escala con el avatar
    color: currentColor;
  }

  [data-feather] {
    width: var(--#{$prefix}avatar-font-size);
    height: var(--#{$prefix}avatar-font-size);
  }
}

// ------------------------------
// Modo oscuro
// ------------------------------

// .avatar {
//   --#{$prefix}avatar-bg: var(--#{$prefix}secondary-bg);
// }

// @if $enable-dark-mode {
//   @include color-mode(dark) {
//     .avatar {
//       --#{$prefix}avatar-bg: var(--#{$prefix}tertiary-bg);
//     }
//   }
// }

// ------------------------------
// Avatar Shapes
// ------------------------------

.avatar-rounded {
  border-radius: 0.5rem;
  img,
  .avatar-title {
    border-radius: inherit;
  }
}

.avatar-square {
  border-radius: 0;
  img,
  .avatar-title {
    border-radius: inherit;
  }
}

// ------------------------------
// Avatar Sizes
// ------------------------------

.avatar-sm {
  @include avatar-size(2rem, 2rem, 1rem);
}

.avatar-lg {
  @include avatar-size(4rem, 4rem, 2rem);
}

.avatar-xl {
  @include avatar-size(5rem, 5rem, 2.5rem);
}

// ------------------------------
// Avatar Status (online/offline, etc.)
// ------------------------------

.avatar-status {
  width: var(--#{$prefix}avatar-status-width);
  height: var(--#{$prefix}avatar-status-height);
  position: absolute;
  bottom: 0;
  right: 0;
  border-radius: 50%;
  border: 2px solid #fff;
  z-index: 1;
}

// ------------------------------
// Avatar Colors (Bootstrap theme colors)
// ------------------------------

@each $color, $value in $theme-colors {
  .avatar-#{$color} {
    @include avatar-variant(
      $background: $value,
      $color: shade-color($value, 80%)
    );
  }
}

// @if $enable-dark-mode {
//   @include color-mode(dark) {
//     // solo aplica al avatar base, no a los variantes
//     .avatar:not([class*="avatar-"]) {
//       --#{$prefix}avatar-bg: #494949;
//       --#{$prefix}avatar-color: #fff;
//     }
//   }
// }

// ------------------------------
// Avatar Group
// ------------------------------

.avatar-group {
  display: inline-flex;

  .avatar {
    margin-right: -1rem;
    border: 2px solid #fff;

    &:last-child {
      margin-right: 0;
    }

    &:hover {
      position: relative;
      z-index: 1;
    }
  }
}
